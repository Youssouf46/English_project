<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Profile</title>
    <link rel="stylesheet" href="style.css">
</head>
<body class="profile-body">

    <header>
        <h1>Profile Pages Showcase</h1>
    </header>

    <main class="profile-showcase-container">
        <div id="profile-card" class="profile-card">
            <!-- Content will be dynamically generated -->
        </div>
    </main>

    <a href="index.html" class="back-link">
        <span>‚Üê</span> Back to Team Page
    </a>

    <script src="data.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const urlParams = new URLSearchParams(window.location.search);
            const studentKey = urlParams.get('student'); 
            const student = studentsData[studentKey];

            if (student) {
                document.title = `Profile of ${student.name}`;
                
                const specialtyClass = student.specialty === 'DE' || student.specialty === 'Data Engineering' ? 'profile-de' : 'profile-dfs';
                const specialtyText = student.specialty === 'DE' || student.specialty === 'Data Engineering' ? 'Data Engineering' : 'Fullstack';
                const specialtyBadgeClass = student.specialty === 'DE' || student.specialty === 'Data Engineering' ? 'badge-de' : 'badge-dfs';
                
                // Parse bio to extract sections
                let codingStrengths = '';
                let codingWeaknesses = '';
                let biggestAchievement = '';
                let futurePlans = '';
                
                if (student.bio) {
                    const bioText = student.bio;
                    
                    // Extract Coding Strengths
                    const strengthsMatch = bioText.match(/\*\*Coding Strengths\*\*([\s\S]*?)(?=\*\*|$)/);
                    if (strengthsMatch) {
                        codingStrengths = strengthsMatch[1].trim();
                    }
                    
                    // Extract Coding Weaknesses
                    const weaknessesMatch = bioText.match(/\*\*Coding Weaknesses\*\*([\s\S]*?)(?=\*\*|$)/);
                    if (weaknessesMatch) {
                        codingWeaknesses = weaknessesMatch[1].trim();
                    }
                    
                    // Extract Biggest Achievement
                    const achievementMatch = bioText.match(/\*\*Biggest Achievement.*?\*\*([\s\S]*?)(?=\*\*|$)/);
                    if (achievementMatch) {
                        biggestAchievement = achievementMatch[1].trim();
                    }
                    
                    // Extract Future Plans
                    const plansMatch = bioText.match(/\*\*Future Plans\*\*([\s\S]*?)$/);
                    if (plansMatch) {
                        futurePlans = plansMatch[1].trim();
                    }
                }
                
                // Get age and nationality
                const age = student.Age ? `${student.Age} years old` : 'N/A';
                const nationality = student.nationality || 'N/A';
                
                // Build skills HTML
                let skillsHTML = '';
                if (student.skills && student.skills.length > 0) {
                    skillsHTML = student.skills.map(skill => 
                        `<span class="profile-skill-badge">${skill}</span>`
                    ).join('');
                }
                
                // Create the profile card HTML
                const profileHTML = `
                    <div class="profile-card-gradient ${specialtyClass}">
                        <div class="profile-card-header">
                            <img src="${student.photo}" alt="${student.name}" class="profile-card-photo">
                            <div class="profile-card-info">
                                <h2 class="profile-card-name">${student.name}</h2>
                                <span class="profile-specialty-badge ${specialtyBadgeClass}">${specialtyText}</span>
                                <div class="profile-meta">
                                    <span class="meta-item">üéÇ ${age}</span>
                                    <span class="meta-item">üåç ${nationality}</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="profile-card-body">
                            <section class="profile-section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üë§</span> About Me
                                </h3>
                                <div class="about-columns">
                                    <div class="about-column">
                                        <h4 class="subsection-title">Coding Strengths</h4>
                                        <ul class="strength-list">
                                            ${codingStrengths ? parseBulletPoints(codingStrengths, 'strength') : '<li class="strength-item">Big Data ecosystem</li><li class="strength-item">Python, Scala, Spark</li>'}
                                        </ul>
                                    </div>
                                    <div class="about-column">
                                        <h4 class="subsection-title">Coding Weaknesses</h4>
                                        <ul class="weakness-list">
                                            ${codingWeaknesses ? parseBulletPoints(codingWeaknesses, 'weakness') : '<li class="weakness-item">Front-end design</li><li class="weakness-item">UI/UX</li>'}
                                        </ul>
                                    </div>
                                </div>
                            </section>
                            
                            <section class="profile-section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üèÜ</span> Biggest Achievement
                                </h3>
                                <p class="section-text">${biggestAchievement || 'SYSTEO DIGITAL web application - Platform showcasing data engineering skills.'}</p>
                            </section>
                            
                            <section class="profile-section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üöÄ</span> Future Plans
                                </h3>
                                <p class="section-text">${futurePlans || 'Seeking internships to gain industry experience and become a Senior Data Architect.'}</p>
                            </section>
                            
                            <section class="profile-section-card">
                                <h3 class="section-title">
                                    <span class="section-icon">üõ†Ô∏è</span> Technical Skills
                                </h3>
                                <div class="profile-skills-container">
                                    ${skillsHTML || '<span class="profile-skill-badge">Python</span><span class="profile-skill-badge">JavaScript</span>'}
                                </div>
                            </section>
                        </div>
                    </div>
                `;
                
                document.getElementById('profile-card').innerHTML = profileHTML;
                
            } else {
                document.getElementById('profile-card').innerHTML = 
                    '<div class="error-message"><h2>Error: Student not found.</h2></div>';
            }
        });
        
        // Helper function to parse bullet points from text
        function parseBulletPoints(text, type) {
            const lines = text.split('\n').filter(line => line.trim());
            const listClass = type === 'strength' ? 'strength-list' : 'weakness-list';
            const itemClass = type === 'strength' ? 'strength-item' : 'weakness-item';
            
            let html = '';
            for (let line of lines) {
                const cleaned = line.trim().replace(/^[-‚Ä¢*]\s*/, '');
                if (cleaned) {
                    html += `<li class="${itemClass}">${cleaned}</li>`;
                }
            }
            
            return html || `<li class="${itemClass}">Information not specified</li>`;
        }
    </script>

</body>
</html>